<h3>Leaves/Holidays/Work Preferences for <%= user.name %>:</h3>

<%= form_for [user, preference], :url => user_leave_preferences_path do |f| %>

 	<div class="box tabular">
		<% if preference.errors.any? %>
			<div class="flash">
				<ul>
			  		<% preference.errors.full_messages.each do |msg| %>
			    		<li><%= msg %></li>
			  		<% end %>
				</ul>
			</div>
		<% end %>
	</div>

	<div>

		<fieldset>
			<p>
				<label>Weekly Working Hours:</label>
				<%= f.text_field :weekly_working_hours %>
			</p>

			<p>
				<label>Annual Leave Days Max:</label>
				<%= f.text_field :annual_leave_days_max %>
			</p>

			<p>
				<label>Holidays Region:</label>
				<%- options = @regions -%>
				<%= f.select :region, options %>
			</p>



			<p>
				<label>Extra Leave Days:</label>
				<%= f.text_field :extra_leave_days %>
			</p>

			<p>
				<label>Contract Start Date:</label>
				<%= f.text_field :contract_start_date %><%= calendar_for('leave_preference_contract_start_date') %>
			</p>

			<p>
				<label>User is a Contractor (Disables the approval system):</label>
				<%= f.check_box :is_contractor %>
			</p>



		</fieldset>
	</div>
	<% if user.allowed_to?(:manage_user_leaves_preferences, nil, :global => true) %>
		<%= f.submit 'Save' %>
	<% else %>
		<p>Save Function is disabled as you do not have sufficient rights</p>
	<% end %>



<% end %>

| <%= link_to 'Back', edit_user_path(user) %> |
<% if @exists && user.allowed_to?(:manage_user_leaves_preferences, nil, :global => true) %>
<%= link_to 'Revert to Defaults', user_leave_preferences_path(user), method: :delete, data: { confirm: 'Are you sure?' } %>
<% end %>